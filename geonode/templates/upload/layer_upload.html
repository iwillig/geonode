{% extends "base.html" %}
{% load i18n %}
{% load static from staticfiles %}

{% block title %} {% trans "Upload Layer"  %} - {{ block.super }} {% endblock %}

{% block head %}

{{ block.super }}
{% endblock %}

{% block main %}
<div class="twocol">
    <h2>{% trans "Add data" %}</h2>

    <a href="{% url data_upload_status %}">Go to your past uploads</a>

    {% if incomplete %}

    <h3>Incomplete Uploads</h3>
    <p>You have the following incomplete uploads:</p>
    {% for u in incomplete %}
    <div class="clearfix" style="border: 1px solid gray; padding: .5em; margin: .5em">
        <div style="float:left">{{ u.name }}, last updated on {{ u.date }}</div>
        <div class="upload_actions" style="float:right">
            <a class="btn btn-mini" href="{{ u.get_resume_url }}">Resume</a>
            <a class="btn btn-mini" href="{{ u.get_delete_url }}">Delete</a>
        </div>
    </div>
    {% endfor %}
    {% endif %}
    {% block additional_info %}{% endblock %}

  {% if errors %}
    <div id="errors">
      {% for error in errors %}
        <div>{{ error }}</div>
      {% endfor %}
    </div>
  {% endif %}

{% if enough_storage %}
  <!-- Start of uploader form -->

  <div id="drop-zone"></div>

  <form id="file-uploader" method="post" enctype="multipart/form-data">
    <input class="btn" id="file-input" type="file" multiple>
  </form>

  <div>
    <ul id="global-errors"></ul>
    <h2>{% trans "Files to be uploaded" %}</h2>
    <div id="file-queue">
    </div>
  </div>

  <a href="#" id="upload-button" class="btn">Upload files</a>
  <!-- End of uploader form -->

{% endif %}
</div>
{% endblock %}


{% block sidebar %}
<div class="threecol">
{% if enough_storage %}
<div class="ivan">
  <h3>Supported Files</h3>
  <p><strong>ZIP:</strong> vector or raster layers</p>
  <p><strong>Vector layers:</strong>SHP, DBF, SHX are required. PRJ
  required if layer is not EPSG:4326. SLD optional</p>
  <p><strong>Raster layers:</strong> GEOTIFF required. WORLD, PRJ,
  files should be included if the original layer data included
  them</p>
</div>
<div id="permissions_form"></div>
</div>
{% endif %}
{% endblock %}



{% block footer-extend %}

{% block require_script %}
<script data-main="{{ STATIC_URL}}js/upload/main" src="{{ STATIC_URL}}libs/require-jquery.js"></script>
{% endblock require_script %}

{% endblock %}
